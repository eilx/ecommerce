import{r as o,j as t,a,u as g,d as p,F as _,L as h}from"./index.7a90b313.js";import{c as N,u as b}from"./styles.module.681fce13.js";function f(n){const[i,e]=o.exports.useState(!0);return t("div",{className:n.className,"aria-busy":i,children:t("img",{...n,className:n.imgClassName,onLoad:()=>e(!1)})})}const v=(n,i,e)=>Math.min(e,Math.max(i,n)),C="_container_cogh3_1",x="_image_cogh3_7",y="_content_cogh3_15",k="_title_cogh3_19",L="_reviews_cogh3_23",w="_price_cogh3_37",u="_input_cogh3_42",s={container:C,image:x,content:y,title:k,reviews:L,price:w,input:u};function P({value:n,onChange:i,min:e=0,max:c=100}){return a("div",{className:u,children:[t("button",{disabled:n<=e,onClick:()=>i(n-1),children:"-"}),t("input",{value:n,inputMode:"numeric",pattern:"/d*",onChange:r=>i(v(parseInt(r.target.value)||0,e,c))}),t("button",{disabled:n>=c,onClick:()=>i(n+1),children:"+"})]})}function $({product:n}){var l;const{cart:i,update:e}=g(),c=(l=i.get(n))!=null?l:0,[r,d]=o.exports.useState(c||1);o.exports.useEffect(()=>{d(c||1)},[c]);const m=()=>{e(n,r-c)};return a("div",{className:c?N.inCart:void 0,children:[t(P,{value:r,min:+!c,onChange:d}),t("button",{disabled:c==r,onClick:m,children:c?c==r?"Added to cart":"Update cart":"Add to cart"})]})}function F(){const n=Number(p().id),i=b(),e=i==null?void 0:i.find(r=>r.id==n),c=e==null?void 0:e.category.toUpperCase();return e?a(_,{children:[t("nav",{"aria-label":"breadcrumb",children:a("ul",{children:[t("li",{children:t(h,{to:"/shop",children:"SHOP"})}),t("li",{children:t(h,{to:`/shop?category=${e.category}`,children:c})}),t("li",{children:t("span",{children:e.id})})]})}),a("section",{className:`grid ${s.container}`,children:[t(f,{className:s.image,src:e.image}),a("div",{className:s.content,children:[t("header",{children:t("h2",{className:s.title,children:e.title})}),a("div",{className:s.reviews,children:[a("p",{children:[t("span",{children:"\u2605".repeat(e.rating.rate)}),t("span",{children:"\u2606".repeat(5.99-e.rating.rate)})]}),a("small",{children:[e.rating.count," ratings"]})]}),a("p",{className:s.price,children:["$",e.price.toFixed(2)]}),t("p",{children:e.description}),t($,{product:e})]})]})]}):t("div",{"aria-busy":!0})}export{F as default};
