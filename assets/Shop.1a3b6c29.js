import{a as s,j as t,r as C,u as b,L as j,b as v,F as N}from"./index.7a90b313.js";import{i as L,u as S,a as $}from"./styles.module.681fce13.js";const u=({items:e,initial:a,value:i,onChange:l})=>{var c;return s("select",{value:i,onChange:r=>l(r.target.value),children:[a&&t("option",{value:"",children:a}),Array.isArray(e)?e==null?void 0:e.map(r=>t("option",{value:r,children:r},r)):(c=Object.entries(e!=null?e:{}))==null?void 0:c.map(([r,g])=>t("option",{value:r,children:g},r))]})},A="_grid_1jax7_1",O="_options_1jax7_8",P="_listing_1jax7_22",R="_image_1jax7_44",w="_information_1jax7_57",E="_bar_1jax7_66",k="_category_1jax7_74",I="_description_1jax7_92",T="_price_1jax7_102",o={grid:A,options:O,listing:P,image:R,information:w,bar:E,category:k,description:I,price:T};function U({product:e}){const[a,i]=C.exports.useState(!1),{cart:l,update:c}=b(),r=l.get(e),g=h=>{h.buttons||(h.preventDefault(),c(e,1))};return t("button",{className:`${o.price} ${r?L:void 0}`,disabled:r==100,onClick:g,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:a?r?`Cart: ${r}`:"Add to cart":`$${e.price.toFixed(2)}`})}function F({product:e,onCategory:a}){return t("li",{className:o.listing,children:t(j,{to:`/shop/${e.id}`,children:s("article",{children:[t("header",{className:o.image,children:t("img",{src:e.image})}),s("section",{className:o.information,children:[s("div",{className:o.bar,children:[t("button",{className:`outline ${o.category}`,onClick:a,children:e.category.toUpperCase()}),s("div",{children:[t("span",{children:"\u2605".repeat(e.rating.rate)}),t("span",{children:"\u2606".repeat(5.99-e.rating.rate)})]})]}),t("h2",{children:e.title}),t("p",{className:o.description,children:e.description}),t(U,{product:e})]})]})})})}const G={rating:(e,a)=>a.rating.rate-e.rating.rate,price_high:(e,a)=>a.price-e.price,price_low:(e,a)=>e.price-a.price},m={rating:"RATING",price_high:"PRICE (HIGH)",price_low:"PRICE (LOW)"};function B(){var p,_;const e=(p=S())!=null?p:[],a=(_=$())!=null?_:[],[i,l]=v(),c=i.get("category"),r=a.includes(c)?c:"",g=n=>l({sort:d,category:n.toLowerCase()}),h=i.get("sort"),d=Object.hasOwn(m,h)?h:"rating",f=n=>l({sort:n,category:r}),y=n=>{const x=n.target;n.preventDefault(),g(x.textContent),scrollTo({top:0,behavior:"smooth"})};return C.exports.useEffect(()=>history.replaceState(null,"","?"+new URLSearchParams({sort:d,category:r})),[]),s(N,{children:[s("div",{className:`grid ${o.options}`,children:[s("label",{children:[t("h3",{children:"CATEGORY"}),t(u,{initial:"ALL",value:r.toUpperCase(),items:a==null?void 0:a.map(n=>n.toUpperCase()),onChange:g})]}),s("label",{children:[t("h3",{children:"SORT BY"}),t(u,{items:m,onChange:f})]})]}),t("ul",{className:o.grid,"aria-busy":!e,children:e.filter(n=>!r||n.category==r).sort(G[d]).map(n=>t(F,{product:n,onCategory:y},n.id))})]})}export{B as default};
